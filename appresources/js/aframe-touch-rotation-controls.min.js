!function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("touch-rotation-controls",{schema:{enabled:{"default":!0},sensitivity:{"default":.04}},init:function(){this.touchDown=!1,this.lookVector=new THREE.Vector2,this.bindMethods()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.lookVector.set(0,0)},remove:function(){this.pause()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this)},addEventListeners:function(){var t=this.el.sceneEl,e=t.canvas;return e?(e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),void e.addEventListener("touchcancel",this.onTouchCancel,!1)):void t.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var t=this.el.sceneEl&&this.el.sceneEl.canvas;t&&(t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1))},isRotationActive:function(){return this.data.enabled&&this.touchDown},getRotationDelta:function(){var t=this.lookVector.clone().multiplyScalar(this.data.sensitivity);return this.lookVector.set(0,0),t},onTouchMove:function(t){if(this.data.enabled&&this.touchDown){var e=t.touches[0],o=e.screenX-this.previousTouchX,n=e.screenY-this.previousTouchY;this.lookVector.x+=o,this.lookVector.y+=n,this.previousTouchX=e.screenX,this.previousTouchY=e.screenY}},onTouchStart:function(t){this.touchDown=!0,this.previousTouchX=t.touches[0].x,this.previousTouchY=t.touches[0].y},onTouchEnd:function(){this.touchDown=!1},onTouchCancel:function(){this.touchDown=!1}})}]);